<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TilersHUB Cost Estimator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; color: #222; padding: 20px; }
    .container {
      max-width: 700px;
      margin: auto;
      background: #fff;
      padding: 25px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    input, select, button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      font-size: 16px;
    }
    button {
      background: #004aad;
      color: white;
      border: none;
    }
    .report {
      margin-top: 25px;
      padding: 15px;
      background: #f0f8ff;
      border-left: 5px solid #004aad;
      border-radius: 5px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
<div class="container">
  <h2 style="text-align:center; color:#004aad;">Tiling Cost Estimator ‚Äì TilersHUB</h2>

  <input id="area" type="number" placeholder="Total Area (sqft)" />
  <label for="tileSize">Select Tile Size:</label>
  <select id="tileSize">
    <option value="300x300">300mm x 300mm</option>
    <option value="600x600">600mm x 600mm</option>
    <option value="600x1200">600mm x 1200mm</option>
  </select>
  <input id="tilePrice" type="number" placeholder="Tile Price (LKR)" />
  <input id="cementPrice" type="number" placeholder="Cement Price (LKR)" />
  <input id="sandPrice" type="number" placeholder="Sand Price (LKR)" />
  <input id="adhesivePrice" type="number" placeholder="Tile Adhesive Price (LKR)" />
  <input id="clipPrice" type="number" placeholder="Leveling Clip Price (LKR)" />
  <input id="groutPrice" type="number" placeholder="Grout Price (LKR)" />

  <button onclick="calculate()">Calculate</button>
  <button onclick="downloadPDF()">Download PDF</button>

  <div id="report" class="report" style="display:none;"></div>
</div>

<script>
const { jsPDF } = window.jspdf;

function getTileSettings(selected) {
  if (selected === "300x300") return { sqft: 0.96, laborMin: 80, laborMax: 120, skirtingCoverage: 3 };
  if (selected === "600x600") return { sqft: 3.87, laborMin: 80, laborMax: 120, skirtingCoverage: 12 };
  if (selected === "600x1200") return { sqft: 7.75, laborMin: 110, laborMax: 150, skirtingCoverage: 24 };
}

let latestReport = "";

function calculate() {
  const sqft = parseFloat(document.getElementById("area").value);
  const tileType = document.getElementById("tileSize").value;
  const settings = getTileSettings(tileType);
  const skirting = Math.ceil(sqft * 0.2);

  const floorTiles = Math.ceil(sqft / settings.sqft);
  const skirtingTiles = Math.ceil(skirting / settings.skirtingCoverage);
  const totalTilesNoWastage = floorTiles + skirtingTiles;
  const totalTiles = Math.ceil(totalTilesNoWastage * 1.05);
  const tilePrice = parseFloat(document.getElementById("tilePrice").value);
  const tileCost = tilePrice * totalTiles;

  const cementPrice = parseFloat(document.getElementById("cementPrice").value);
  const sandPrice = parseFloat(document.getElementById("sandPrice").value);
  const adhesivePrice = parseFloat(document.getElementById("adhesivePrice").value);
  const clipPrice = parseFloat(document.getElementById("clipPrice").value);
  const groutPrice = parseFloat(document.getElementById("groutPrice").value);

  const cementMin = 10 * sqft / 1000;
  const cementMax = 14 * sqft / 1000;
  const sandMin = 1.25 * sqft / 1000;
  const sandMax = 1.75 * sqft / 1000;
  const adhesiveMin = 25 * sqft / 1000;
  const adhesiveMax = 40 * sqft / 1000;
  const clipQty = Math.ceil(sqft / 100);
  const groutQty = Math.ceil(sqft / 175);

  const materialMin = tileCost + cementMin * cementPrice + sandMin * sandPrice + adhesiveMin * adhesivePrice + clipQty * clipPrice + groutQty * groutPrice;
  const materialMax = tileCost + cementMax * cementPrice + sandMax * sandPrice + adhesiveMax * adhesivePrice + clipQty * clipPrice + groutQty * groutPrice;

  latestReport = `üìê Project Summary
Area: ${sqft} sqft
Tile Size: ${tileType.replace("x", "mm x ")} mm
Skirting (auto): ${skirting} ft

üì¶ Materials Estimate
Floor Tile Quantity: ${floorTiles}
Skirting Tile Quantity: ${skirtingTiles}
Total Tile Quantity (before wastage): ${totalTilesNoWastage}
Total Tile Quantity (with 5% wastage): ${totalTiles}
Tile Cost: LKR ${tileCost.toFixed(0)}
Cement: ${cementMin.toFixed(2)} ‚Äì ${cementMax.toFixed(2)} bags
Sand: ${sandMin.toFixed(2)} ‚Äì ${sandMax.toFixed(2)} cubes
Tile Adhesive: ${adhesiveMin.toFixed(2)} ‚Äì ${adhesiveMax.toFixed(2)} bags
Leveling Clips: ${clipQty} packs
Grout: ${groutQty} kg

üë∑ Labor Cost Range
LKR ${settings.laborMin * sqft} ‚Äì LKR ${settings.laborMax * sqft}

üí∞ Total Project Estimate
Minimum: LKR ${(materialMin + settings.laborMin * sqft).toFixed(0)}
Maximum: LKR ${(materialMax + settings.laborMax * sqft).toFixed(0)}
`;

  document.getElementById("report").innerText = latestReport;
  document.getElementById("report").style.display = "block";
}

function downloadPDF() {
  const doc = new jsPDF();
  doc.setFontSize(14);
  doc.setTextColor(0);
  const lines = doc.splitTextToSize(latestReport, 180);
  doc.text(lines, 10, 20);
  const height = doc.internal.pageSize.height;
  doc.setFontSize(9);
  doc.setTextColor(100);
  doc.text("Find 100% verified professional tilers ‚Äì www.tilershub.lk", 10, height - 15);
  doc.text("WhatsApp: 0774503744", 10, height - 8);
  doc.save("TilersHUB_Tiling_Report.pdf");
}
</script>
</body>
</html>
