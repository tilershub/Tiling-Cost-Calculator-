<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TILERSHUB | Tiling Cost Estimator</title>

  <!-- PDF Generator -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f9f9f9;
    }

    h1 {
      text-align: center;
      color: #0a3d62;
    }

    .container {
      max-width: 800px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    label {
      display: block;
      margin: 10px 0 5px;
    }

    input {
      width: 100%;
      padding: 8px;
      margin-bottom: 15px;
    }

    button {
      background-color: #0a3d62;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      margin-right: 10px;
    }

    #results {
      margin-top: 20px;
    }

    .result-item {
      margin-bottom: 10px;
    }

    #downloadReport {
      display: none;
      margin-top: 20px;
    }

    /* Report PDF styling */
    #report-section {
      display: none;
      max-width: 800px;
      margin: auto;
      padding: 40px;
      background: #fff;
      border: 1px solid #ccc;
    }

    .report-header,
    .report-footer {
      text-align: center;
      font-weight: bold;
      color: #0a3d62;
      margin: 10px 0;
    }

    table.report-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    table.report-table th,
    table.report-table td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: left;
    }
  </style>
</head>
<body>

  <h1>TILERSHUB Tiling Cost Estimator</h1>

  <div class="container">
    <label for="length">Room Length (ft):</label>
    <input type="number" id="length" placeholder="e.g., 20" />

    <label for="width">Room Width (ft):</label>
    <input type="number" id="width" placeholder="e.g., 15" />

    <label for="tileSize">Tile Size (inches, e.g., 24):</label>
    <input type="number" id="tileSize" placeholder="e.g., 24" />

    <label for="laborRate">Labor Rate (Rs/sqft):</label>
    <input type="number" id="laborRate" placeholder="e.g., 40" />

    <button id="calculateBtn">Calculate</button>
    <button id="downloadReport">Download PDF Report</button>

    <div id="results">
      <div class="result-item">Total Area: <span id="totalArea"></span></div>
      <div class="result-item">Tile Size: <span id="tileSizeResult"></span></div>
      <div class="result-item">Tile Quantity: <span id="tileQuantity"></span></div>
      <div class="result-item">Adhesive Bags: <span id="adhesiveBags"></span></div>
      <div class="result-item">Cement Bags: <span id="cementBags"></span></div>
      <div class="result-item">Sand Cubes: <span id="sandCubes"></span></div>
      <div class="result-item">Clips: <span id="clips"></span></div>
      <div class="result-item">Grout: <span id="grout"></span></div>
      <div class="result-item">Labor Cost: <span id="laborCost"></span></div>
      <div class="result-item">Total Material Cost: <span id="totalMaterialCost"></span></div>
    </div>
  </div>

  <!-- Hidden Report Section -->
  <div id="report-section">
    <div class="report-header">TILERSHUB Estimate Report</div>
    <table class="report-table" id="report-table"></table>
    <div class="report-footer">TILERSHUB • www.tilershub.lk • 0774503744</div>
  </div>

  <script>
    document.getElementById("calculateBtn").addEventListener("click", function () {
      const length = parseFloat(document.getElementById("length").value);
      const width = parseFloat(document.getElementById("width").value);
      const tileSize = parseFloat(document.getElementById("tileSize").value);
      const laborRate = parseFloat(document.getElementById("laborRate").value);

      if (!length || !width || !tileSize || !laborRate) {
        alert("Please fill in all fields");
        return;
      }

      const area = length * width;
      const tileSqft = (tileSize / 12) * (tileSize / 12);
      const totalTiles = Math.ceil(area / tileSqft);
      const adhesiveBags = Math.ceil(area / 40);
      const cementBags = Math.ceil(area / 60);
      const sandCubes = (area / 300).toFixed(1);
      const clips = totalTiles * 2;
      const grout = Math.ceil(area / 150);
      const laborCost = laborRate * area;
      const materialCost = adhesiveBags * 1800 + cementBags * 1650 + grout * 950;

      // Display Results
      document.getElementById("totalArea").textContent = `${area} sqft`;
      document.getElementById("tileSizeResult").textContent = `${tileSize}x${tileSize} inch`;
      document.getElementById("tileQuantity").textContent = totalTiles;
      document.getElementById("adhesiveBags").textContent = adhesiveBags;
      document.getElementById("cementBags").textContent = cementBags;
      document.getElementById("sandCubes").textContent = sandCubes;
      document.getElementById("clips").textContent = clips;
      document.getElementById("grout").textContent = grout;
      document.getElementById("laborCost").textContent = `Rs. ${laborCost.toLocaleString()}`;
      document.getElementById("totalMaterialCost").textContent = `Rs. ${materialCost.toLocaleString()}`;

      buildReport();
      document.getElementById("downloadReport").style.display = "inline-block";
    });

    function buildReport() {
      const fields = {
        "Total Area": document.getElementById("totalArea").textContent,
        "Tile Size": document.getElementById("tileSizeResult").textContent,
        "Tile Quantity": document.getElementById("tileQuantity").textContent,
        "Adhesive Bags": document.getElementById("adhesiveBags").textContent,
        "Cement Bags": document.getElementById("cementBags").textContent,
        "Sand Cubes": document.getElementById("sandCubes").textContent,
        "Clips": document.getElementById("clips").textContent,
        "Grout": document.getElementById("grout").textContent,
        "Labor Cost": document.getElementById("laborCost").textContent,
        "Total Material Cost": document.getElementById("totalMaterialCost").textContent,
      };

      const table = document.getElementById("report-table");
      table.innerHTML = "";

      for (const [key, value] of Object.entries(fields)) {
        const row = document.createElement("tr");
        row.innerHTML = `<th>${key}</th><td>${value}</td>`;
        table.appendChild(row);
      }
    }

    document.getElementById("downloadReport").addEventListener("click", function () {
      const report = document.getElementById("report-section");
      report.style.display = "block";

      html2pdf()
        .set({
          margin: 0.5,
          filename: 'TILERSHUB-Estimate.pdf',
          html2canvas: { scale: 2 },
          jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
        })
        .from(report)
        .save()
        .then(() => {
          report.style.display = "none";
        });
    });
  </script>
</body>
</html>